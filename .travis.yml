language: node_js
node_js:
  - "0.10"

before_script:
  - export DISPLAY=:99.0
  - npm install
  - node node_modules/bower/bin/bower install
  - cd test
  - node ../node_modules/bower/bin/bower install
  - cd ..

script:
  - node node_modules/karma/bin/karma start karma.conf.js --no-auto-watch --single-run --reporters=dots --browsers=Firefox
  - node node_modules/gulp/bin/gulp

deploy:
  provider: divshot
  api_key: 
    secure: Kmy6NmmohYFQohtJju9tI6BPhlf8hbeGy4PwbAstImdZx+HOzNEstQWhFQ99MpzCQNNuo+M4kkqk+TRrWQg+a8by84kbqGwDkfgx2N1Y4BmAJ18UXXkWZObsWjj4ADNRHrJxpv+hOSqIH7cvkudgqqn0l4Y+mMzuRBBuw3BWreBCpH33qxGjQOsfZJ8zZL2/nlT6qXyAAbBrX9E2gpu+RF0XQCibtfMzyBLBAydqSLTqU0N11tn7OghB+VeCk701qa3gq9pZspcsfgB9EmLUrV+15KZD1doyodMzVUa1JllKSMER8pknqyTU/FsJw0Pb/wcJpszW+YGSIjc9knlelW8wlvZaUnZ50Klh6YK7HlTKuPylvo84LgN1UxzJlixyXxwNv7UehgwYXN2khp7+JeKjQgQ2do/KVEAoVDy8tTiOdvWC9UOeJHOU0V/JB1ISQptRw9mpPTck0CQOIXfHHo/WrFEDL1fkZIdJOf0S9Z/N0CiEoW1iaoYxXWrJSioRnWf7oIhYAu/dg9RBLGXTLcTnJP+QxjL0QZS4HiwOwVnEPiCI37xF/mLP/e0T/Ldataev7lRl3bUGQ6PGW2MeoPtcMV8dT0qbZdbUhqm4LcaAVl3LsVi0+7KeC8EF5S3kwAxgFKj018xDBVC9ZXc+GXSpK1iZdEdjKWjC8jHw9wo=
  environment:
    master: development
  skip_cleanup: true